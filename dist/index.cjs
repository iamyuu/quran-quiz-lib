Object.defineProperty(exports,"__esModule",{value:!0});var e=require("zod"),r=require("fs");function t(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach(function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}}),r.default=e,r}var n=t(r);const u=e.z.object({id:e.z.number(),verse_number:e.z.number(),verse_key:e.z.string(),juz_number:e.z.number(),hizb_number:e.z.number(),rub_el_hizb_number:e.z.number(),ruku_number:e.z.number(),manzil_number:e.z.number(),sajdah_number:e.z.nullable(e.z.number()),chapter_id:e.z.number(),text_imlaei:e.z.string(),text_uthmani:e.z.string(),page_number:e.z.number()}),a=()=>{let r=e.z.object({verses:e.z.array(u)}).safeParse(JSON.parse(n.readFileSync("./src/data/quran.json","utf-8")));if(!r.success)throw Error("Failed to parse data");return r.data.verses},o=e=>a().reduce((r,t)=>(e.includes(t.chapter_id)&&r.push(t.id),r),[]),s=e=>{let r=a().find(r=>r.id===e);if(!r)throw Error("Failed to find verse");return r.text_uthmani};function i(){return(i=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}const l=e=>{if(e.length<5)throw Error("Not enough numbers");let r=Math.floor(Math.random()*(e.length-1)),t=[e[r],e[r+1]],n=e.filter((e,t)=>t!==r&&t!==r+1);if(n.length<3)throw Error("Not enough remaining numbers");let u=[];for(let e=0;e<3;e++){let e=Math.floor(Math.random()*n.length);u.push(n[e]),n.splice(e,1)}return{question:t[0],answer:t[1],options:u}},b=e=>{let{indexOf:r,getter:t}=e,n={question:t(r.question),options:[...r.options.map(e=>({text:t(e),value:0})),{text:t(r.answer),value:1}]};return m(n)},m=e=>{let r=[...e.options];for(let e=r.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[r[e],r[t]]=[r[t],r[e]]}return i({},e,{options:r})},c=e=>e.sort((e,r)=>e-r),h=r=>{let t=e.z.object({select:e.z.array(e.z.number({invalid_type_error:"Must be number"}).min(1,"Must be between 1 and 114").max(114,"Must be between 1 and 114")).min(1,"Select at least one chapter"),amount:e.z.number().min(1)}),n=t.parse(r),{select:u,amount:a}=n,i=o(u),m=[];for(let e=0;e<a;e++){let{answer:e,options:r,question:t}=l(i),n=b({indexOf:{answer:e,options:r,question:t},getter:s});m.push(n)}return{data:m,meta:{type:"guessVerseByChapter",select:c(u),amount:a}}},p={byChapter:h};exports.guessVerse=p;
